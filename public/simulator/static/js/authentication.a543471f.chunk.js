(window.webpackJsonpmbs_frontend=window.webpackJsonpmbs_frontend||[]).push([[4],{195:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var a=r(7),n=r(17),s=r(29),o=r(27),i=r(28),c=r(1),l=r.n(c),u=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e={display:"flex",height:this.props.height||"100%",width:"calc(100% + 1px)",alignItems:this.props.vertical||"center",justifyContent:this.props.horzontal||"center",backgroundColor:this.props.background||"inherit",flexDirection:this.props.direction||"row",position:"relative"};return this.props.templateWrap?l.a.createElement("div",{style:e},l.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",overflow:"hidden"}},l.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",bottom:"0",overflow:"hidden",overflowY:"scroll"}},this.props.children))):l.a.createElement("div",{style:e},this.props.children)}}]),t}(l.a.Component);u.defaultProps={templateWrap:!1}},285:function(e,t,r){"use strict";var a=r(381),n=r(18),s=r(7),o=r(17),i=r(29),c=r(27),l=r(28),u=r(1),p=r.n(u),h=r(880),d=r(56);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(i.a)(this,Object(c.a)(t).call(this,e))).setHover=function(){r.setState({hovered:!0})},r.removeHover=function(){r.setState({hovered:!1})},r.state={hovered:!1},r}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e;e=null===this.props.auth.user||void 0===this.props.auth.user.client.appConfiguration?g({},this.props.style):g({},this.props.auth.user.client.appConfiguration.buttonStyle,{},this.props.style);var t=this.props,r=(t.dispatch,Object(a.a)(t,["dispatch"]));return p.a.createElement(h.a,Object.assign({},r,{onMouseEnter:this.props.disabled?null:this.setHover,onMouseLeave:this.props.disabled?null:this.removeHover,style:e}),this.props.children)}}]),t}(p.a.Component);t.a=Object(d.b)(function(e){return{auth:e.auth}})(f)},899:function(e,t,r){"use strict";r.r(t);var a=r(18),n=r(7),s=r(17),o=r(29),i=r(27),c=r(28),l=r(1),u=r.n(l),p=r(56),h=r(8),d=r(895),m=r(897),g=r(902),f=r(892),b=r(327),v=r(880),y=r(904),O=r(881),E=r(16),j=r(13),w=r(5),P=r(594),S=r(2),C=r.n(S);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var D=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,s=t.value;r.setState(Object(a.a)({},n,s))},r.handleSubmit=function(){var e=r.state,t=e.email,a=e.password;r.setState({isFetching:!0}),r.props.actions.login(t,a,r.props.apiUrl).then(function(e){"error"===r.props.auth.status?r.setState({isFetching:!1,errorRaised:!0,errorMessages:e.err.errors}):r.props.setAuthenticated()}).catch(function(e){r.setState({isFetching:!1,errorRaised:!0,errorMessages:e.errors})})},r.getErrors=function(){var e="";return r.props.location.query&&(e=r.props.location.query.message),r.state.errorRaised&&(e=C.a.join(r.state.errorMessages,"\n")),e},r.state={email:"",password:"",isFetching:!1,errorRaised:!1,errorMessages:[]},r}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},j.a.boxStyle,{background:j.a.colors.master,color:"#ffffff",marginTop:"-40px"}),t={placeholder:"Enter Password",text:"Password"};return u.a.createElement("div",{style:e},u.a.createElement("h1",null,"Login"),u.a.createElement(d.a,{loading:!!this.state.isFetching,error:!!this.state.errorRaised||!!this.props.location.query,onSubmit:this.handleSubmit},u.a.createElement(m.a,{error:!0,content:this.getErrors()}),u.a.createElement(d.a.Input,{label:j.a.authentication.label,name:j.a.authentication.type,value:this.state.email,onChange:this.handleChange,onCopy:function(e){return e.preventDefault(),!1},onPaste:function(e){return e.preventDefault(),!1},type:"text",placeholder:j.a.authentication.help}),u.a.createElement(d.a.Input,{label:t.text,name:"password",value:this.state.password,onChange:this.handleChange,onCopy:function(e){return e.preventDefault(),!1},onPaste:function(e){return e.preventDefault(),!1},type:"password",placeholder:t.placeholder}),u.a.createElement(v.a,{primary:!0,content:"Login"})),!j.a.clientApp&&u.a.createElement("div",null,u.a.createElement(P.a,null),u.a.createElement(v.a,{fluid:!0,secondary:!0,as:"a",href:"/#/",content:"Go back to Home Page"})))}}]),t}(u.a.Component),R=r(285),x=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleSubmit=function(){var e=r.state.email;r.setState({isFetching:!0,errorRaised:!1,success:!1}),r.props.actions.forgotPassword(e).then(function(e){"error"===r.props.auth.status?r.setState({isFetching:!1,errorRaised:!0,errorMessages:e.err.errors}):r.setState({isFetching:!1,success:!0,successMessages:[e.message]})}).catch(function(e){r.setState({isFetching:!1,errorRaised:!0,errorMessages:e.errors})})},r.handleChange=function(e,t){var n=t.name,s=t.value;r.setState(Object(a.a)({},n,s))},r.getErrors=function(){var e="";return r.state.errorRaised&&(e=C.a.join(r.state.errorMessages,"\n")),e},r.getSuccess=function(){var e="";return r.state.success&&(e=C.a.join(r.state.successMessages,"\n")),e},r.state={email:"",isFetching:!1,errorRaised:!1,errorMessages:[],success:!1,successMessages:[]},r}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={placeholder:"Enter Email",text:"Email"},t="Login?",r="Send Mail";return u.a.createElement("div",{style:j.a.style},u.a.createElement(d.a,{loading:!!this.state.isFetching,error:this.state.errorRaised,success:this.state.success,onSubmit:this.handleSubmit},u.a.createElement(m.a,{error:!0,content:this.getErrors()}),u.a.createElement(m.a,{success:!0,content:this.getSuccess()}),u.a.createElement(d.a.Input,{label:e.text,name:"email",type:"email",value:this.state.email,onChange:this.handleChange,onCopy:function(e){return e.preventDefault(),!1},onPaste:function(e){return e.preventDefault(),!1},placeholder:e.placeholder}),u.a.createElement(R.a,null,r),u.a.createElement(h.a,{to:j.a.auth.routes.login},t)))}}]),t}(u.a.Component),M=function(e){function t(){var e,r;Object(n.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(r=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).logout=function(){r.props.actions.logout(),r.props.setLoggedOut()},r.cancel=function(){h.d.goBack()},r}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{style:{padding:"30px",background:"#fff",width:"80%",margin:"10%",textAlign:"center"}},"Are you sure you want to log out?",u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(v.a,{content:"Log Out",onClick:this.logout}),u.a.createElement("br",null),"or",u.a.createElement("br",null),u.a.createElement("a",{style:{cursor:"pointer"},onClick:this.cancel},"Cancel"))}}]),t}(u.a.Component),A=r(195);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(r,!0).forEach(function(t){Object(a.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=function(e){function t(e){var r;return Object(n.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).setLoggedOut=function(){r.setState({authenticated:!1})},r.setAuthenticated=function(){r.props.actions.session().then(function(){if("creator"===r.props.location.pathname)r.setState({authenticated:!0});else{var e="#"===r.props.simParams.lastLocation?j.a.auth.routes.authenticatedRoot:r.props.simParams.lastLocation;h.d.push({pathname:e,query:r.props.location.query})}})},r.updateName=function(e){return r.setState({name:e.target.value})},r.updateEmail=function(e){return r.setState({email:e.target.value})},r.updatePassword=function(e){return r.setState({password:e.target.value,confirm:e.target.value})},r.togglePasswordVisibility=function(e){return r.setState({showPassword:!r.state.showPassword})},r.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},r.handleSubmit=function(){r.setState({submitted:!0},function(){return r.props.actions.register(r.state.name,r.state.email,r.state.password,r.state.confirm).then(function(e){"error"===e.status?r.setState({submitted:!1,errorRaised:!0,errorMessages:e.err.errors.full_messages}):h.d.push("/")}).catch(function(e){r.setState({submitted:!1,errorRaised:!0,errorMessages:e.err.response.err.errors.full_messages})})})},r.state={authenticated:r.props.auth.isUserLoggedIn},r}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={position:"fixed",right:"0",bottom:"0",minWidth:"100%",minHeight:"100%"},t=L({},e,{background:"rgba(255,255,255,0.5)"}),r={};if(this.state.authenticated)r=u.a.createElement(M,Object.assign({},this.props,{setLoggedOut:this.setLoggedOut}));else{var a=L({},j.a.boxStyle,{background:j.a.colors.master,color:"#ffffff",marginTop:"-32px"});switch(this.props.location.pathname){case j.a.auth.routes.forgotPassword:r=u.a.createElement(x,this.props);break;case j.a.auth.routes.logout:r=u.a.createElement(D,Object.assign({},this.props,{setAuthenticated:this.setAuthenticated,apiUrl:this.props.apiUrl}));break;case"/register":r=u.a.createElement("div",{style:a},u.a.createElement(d.a,{loading:!!this.state.submitted,error:!!this.state.errorRaised||!!this.props.location.query,onSubmit:this.handleSubmit},u.a.createElement(m.a,{hidden:!this.state.errorRaised,visible:this.state.errorRaised,error:!0,header:"There were some errors with your submission",list:this.state.errorMessages}),u.a.createElement("h1",null,"Register"),u.a.createElement(d.a.Field,null,u.a.createElement("label",null,"Name"),u.a.createElement(g.a,{trigger:u.a.createElement(f.a,{fluid:!0,placeholder:"Enter your Name",onChange:this.updateName}),header:"Name",content:"Please enter your Name",on:"focus"})),u.a.createElement(d.a.Field,null,u.a.createElement("label",null,"Email Id"),u.a.createElement(g.a,{trigger:u.a.createElement(f.a,{fluid:!0,placeholder:"Enter your email id",onChange:this.updateEmail}),header:"Email Id",content:Object(w.a)().registration.restricted?"You can only register with "+Object(w.a)().registration.allowedDomains.join(", ")+" domains":"Please enter a valid email id",on:"focus"})),u.a.createElement(d.a.Field,null,u.a.createElement("label",null,"Password"),u.a.createElement(f.a,{fluid:!0,type:this.state.showPassword?"text":"password",icon:u.a.createElement(b.a,{name:this.state.showPassword?"eye":"eye slash outline",link:!0,onClick:this.togglePasswordVisibility}),placeholder:"Enter a password",onChange:this.updatePassword})),u.a.createElement(v.a,{fluid:!0,secondary:!0,disabled:""===this.state.email||""===this.state.password},"Register"),u.a.createElement(y.a,{basic:!0,style:{textAlign:"center"}},u.a.createElement("div",null,"Already registered?"),u.a.createElement("a",{href:"/#/login"},"Login "))));break;default:r=u.a.createElement(D,Object.assign({},this.props,{setAuthenticated:this.setAuthenticated,apiUrl:this.props.apiUrl}))}}return u.a.createElement("div",{style:{height:"100vh",position:"relative"}},u.a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,style:e},u.a.createElement("source",{src:"assets/images/configurable/simbg.mp4",type:"video/mp4"})),u.a.createElement("div",{style:t}),u.a.createElement(A.a,null,u.a.createElement("div",null,u.a.createElement("img",{src:"assets/images/configurable/cologo.png",alt:"logo",style:{width:"90%",margin:"0 5%",display:"block"}}),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(O.a,{padded:!0,divided:!0},u.a.createElement(O.a.Row,null,u.a.createElement(O.a.Column,{width:16},r))))))}}]),t}(u.a.Component);t.default=Object(p.b)(function(e){return{auth:e.auth,simParams:e.simParams}},function(e){return{actions:{register:function(t,r,a,n){return e(E.b.register(t,r,a,n))},login:function(t,r,a){return e(E.b.login(t,r,a))},logout:function(){return e(E.b.logout())},session:function(){return e(E.b.session())},omniAuth:function(t){return e(E.b.omniAuthLogin(t))},forgotPassword:function(t){return e(E.b.forgotPassword(t))}}}})(I)}}]);
//# sourceMappingURL=authentication.a543471f.chunk.js.map